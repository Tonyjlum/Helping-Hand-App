{"ast":null,"code":"import _defineProperty from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/src/components/newevent.js\";\nimport React, { Component } from 'react';\nimport { Form, Button, Row, Col } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport * as Const from '../const.js';\nvar RESETSTATE = {\n  datetime: \"\",\n  title: \"\",\n  discription: \"\",\n  max_volunteers: \"\",\n  address: \"\",\n  lat: 0,\n  long: 0\n};\n\nvar NewEvent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewEvent, _Component);\n\n  function NewEvent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NewEvent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NewEvent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = RESETSTATE;\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.id, e.target.value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      fetch(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(_this.state.address, \"&key=\").concat(Const.GEOAPI)).then(function (response) {\n        return response.json();\n      }).then(function (geolocation) {\n        if (geolocation.status === \"ZERO_RESULTS\") {\n          return alert(\"\".concat(_this.state.address, \" is not a valid address. Please try a different address\"));\n        } else {\n          var position = {\n            latitude: geolocation.results[0].geometry.location.lat,\n            longitude: geolocation.results[0].geometry.location.lng\n          };\n\n          _this.props.addLocationToStore(position);\n\n          _this.setState({\n            lat: geolocation.results[0].geometry.location.lat,\n            long: geolocation.results[0].geometry.location.lng\n          }, function () {\n            return _this.postNewEvent();\n          });\n        }\n      });\n    };\n\n    _this.postNewEvent = function () {\n      fetch(\"\".concat(Const.ENDPOINT, \"events\"), {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          coordinator_id: _this.props.state.currentUser.id,\n          datetime: _this.state.datetime,\n          title: _this.state.title,\n          max_volunteers: _this.state.max_volunteers,\n          address: _this.state.address,\n          description: _this.state.discription,\n          lat: _this.state.lat,\n          long: _this.state.long\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        _this.props.addEventToStore(json);\n\n        fetch(\"\".concat(Const.ENDPOINT, \"users/\").concat(json.coordinator_id)).then(function (response) {\n          return response.json();\n        }).then(function (json) {\n          return _this.props.addEventsToUser(json);\n        });\n      }).then(function () {\n        return _this.setState(RESETSTATE);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(NewEvent, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Form, {\n        className: \"new-event-form\",\n        onChange: this.handleChange,\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Event Title:\"), React.createElement(Form.Control, {\n        required: true,\n        type: \"text\",\n        value: this.state.title,\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        xs: 7,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"discription\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Discription: \"), React.createElement(Form.Control, {\n        required: true,\n        type: \"text\",\n        placeholder: \"e.g. clean up Riegelmann Boardwalk at Coney Island\",\n        value: this.state.discription,\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Address: \"), React.createElement(Form.Control, {\n        required: true,\n        type: \"text\",\n        value: this.state.address,\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        xs: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"max_volunteers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Volunteers:\"), React.createElement(Form.Control, {\n        required: true,\n        type: \"number\",\n        value: this.state.max_volunteers,\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        xs: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"datetime\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Date and Time\"), React.createElement(Form.Control, {\n        required: true,\n        type: \"datetime-local\",\n        value: this.state.datetime.slice(0, 16),\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Plan the event!\"));\n    }\n  }]);\n\n  return NewEvent;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state\n  };\n};\n\nvar mapDispatchToProps = {\n  addEventToStore: function addEventToStore(event) {\n    return {\n      type: \"ADD_NEW_EVENT\",\n      payload: event\n    };\n  },\n  addEventsToUser: function addEventsToUser(user) {\n    return {\n      type: \"ADD_LOGIN_ACCOUNT_TO_STORE\",\n      payload: user\n    };\n  },\n  addLocationToStore: function addLocationToStore(location) {\n    return {\n      type: \"ADD_CURRENT_LOCATION\",\n      payload: location\n    };\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(NewEvent);","map":{"version":3,"sources":["/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/src/components/newevent.js"],"names":["React","Component","Form","Button","Row","Col","connect","Const","RESETSTATE","datetime","title","discription","max_volunteers","address","lat","long","NewEvent","state","handleChange","e","setState","target","id","value","handleSubmit","preventDefault","fetch","GEOAPI","then","response","json","geolocation","status","alert","position","latitude","results","geometry","location","longitude","lng","props","addLocationToStore","postNewEvent","ENDPOINT","method","headers","body","JSON","stringify","coordinator_id","currentUser","description","addEventToStore","addEventsToUser","slice","mapStateToProps","mapDispatchToProps","event","type","payload","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, Button, Row, Col} from 'react-bootstrap'\nimport { connect } from 'react-redux'\nimport * as Const from '../const.js'\n\nconst RESETSTATE = {\n  datetime: \"\",\n  title: \"\",\n  discription: \"\",\n  max_volunteers: \"\",\n  address: \"\",\n  lat: 0,\n  long: 0\n}\n\nclass NewEvent extends Component {\n  state = RESETSTATE\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value\n    })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault()\n    fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${this.state.address}&key=${Const.GEOAPI}`)\n    .then(response => response.json())\n    .then( geolocation => {\n      if (geolocation.status === \"ZERO_RESULTS\"){\n        return alert(`${this.state.address} is not a valid address. Please try a different address`)\n      } else {\n        const position = {\n          latitude: geolocation.results[0].geometry.location.lat,\n          longitude: geolocation.results[0].geometry.location.lng\n        }\n        this.props.addLocationToStore(position)\n        this.setState({\n          lat: geolocation.results[0].geometry.location.lat,\n          long: geolocation.results[0].geometry.location.lng\n        }, () => this.postNewEvent())\n      }\n    })\n  }\n\n  postNewEvent = () => {\n    fetch(`${Const.ENDPOINT}events`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        coordinator_id: this.props.state.currentUser.id,\n        datetime: this.state.datetime,\n        title: this.state.title,\n        max_volunteers: this.state.max_volunteers,\n        address: this.state.address,\n        description: this.state.discription,\n        lat: this.state.lat,\n        long: this.state.long\n      })\n    })\n    .then(response => response.json())\n    .then(json => {\n      this.props.addEventToStore(json)\n      fetch(`${Const.ENDPOINT}users/${json.coordinator_id}`)\n      .then(response => response.json())\n      .then(json => this.props.addEventsToUser(json))\n    })\n    .then(() => this.setState(RESETSTATE))\n  }\n\n  render() {\n    return (\n      <Form\n        className= \"new-event-form\"\n        onChange={this.handleChange}\n        onSubmit={this.handleSubmit}>\n        <Row>\n          <Col xs={5}>\n          <Form.Group controlId=\"title\">\n            <Form.Label>Event Title:</Form.Label>\n            <Form.Control\n              required\n              type=\"text\"\n              value={this.state.title}\n              size=\"sm\"\n            />\n            <Form.Text className=\"text-muted\">\n            </Form.Text>\n          </Form.Group>\n          </Col>\n          <Col xs={7}>\n          <Form.Group controlId=\"discription\">\n            <Form.Label>Discription: </Form.Label>\n            <Form.Control\n              required\n              type=\"text\"\n              placeholder=\"e.g. clean up Riegelmann Boardwalk at Coney Island\"\n              value={this.state.discription}\n              size=\"sm\"\n            />\n            <Form.Text className=\"text-muted\">\n            </Form.Text>\n          </Form.Group>\n          </Col>\n        </Row>\n        <Row>\n          <Col xs={5}>\n          <Form.Group controlId=\"address\">\n            <Form.Label>Address: </Form.Label>\n            <Form.Control\n              required\n              type=\"text\"\n              value={this.state.address}\n              size=\"sm\"\n            />\n            <Form.Text className=\"text-muted\">\n            </Form.Text>\n          </Form.Group>\n          </Col>\n          <Col xs={2}>\n          <Form.Group controlId=\"max_volunteers\">\n            <Form.Label>Volunteers:</Form.Label>\n            <Form.Control\n              required\n              type=\"number\"\n              value={this.state.max_volunteers}\n              size=\"sm\"\n            />\n            <Form.Text className=\"text-muted\">\n            </Form.Text>\n          </Form.Group>\n          </Col>\n          <Col xs={5}>\n          <Form.Group controlId=\"datetime\">\n            <Form.Label>Date and Time</Form.Label>\n            <Form.Control\n              required\n              type=\"datetime-local\"\n              value={this.state.datetime.slice(0,16)}\n              size=\"sm\"\n            />\n            <Form.Text className=\"text-muted\">\n            </Form.Text>\n          </Form.Group>\n          </Col>\n        </Row>\n        <Button variant=\"primary\" type=\"submit\" size=\"sm\">\n          Plan the event!\n        </Button>\n      </Form>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {state}\n}\n\nconst mapDispatchToProps = {\n  addEventToStore: (event) => ({type: \"ADD_NEW_EVENT\", payload: event}),\n  addEventsToUser:(user) =>({type:\"ADD_LOGIN_ACCOUNT_TO_STORE\", payload:user}),\n  addLocationToStore: (location) => ({type: \"ADD_CURRENT_LOCATION\", payload: location})\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewEvent)\n"]},"metadata":{},"sourceType":"module"}