{"ast":null,"code":"import _toConsumableArray from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/src/components/donationmodal.js\";\nimport React, { Component } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport * as Const from '../const.js';\n\nvar DonationModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DonationModal, _Component);\n\n  function DonationModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DonationModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DonationModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      donationAmount: 5\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.id, e.target.value));\n    };\n\n    _this.handleSubmit = function () {\n      _this.props.onHide();\n\n      fetch(\"\".concat(Const.ENDPOINT, \"donations\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          event_id: _this.props.event.id,\n          sponsor_id: _this.props.state.currentUser.id,\n          amount_per_volunteer: _this.state.donationAmount\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        _this.props.addToDonations(json);\n\n        var updatedEvents = _this.updateEvents(_this.updateEventDonations(json));\n\n        _this.props.UpdateEvents(updatedEvents);\n      });\n    };\n\n    _this.updateEvents = function (new_event) {\n      return _this.props.state.events.map(function (event) {\n        if (new_event.id === event.id) {\n          return new_event;\n        } else {\n          return event;\n        }\n      });\n    };\n\n    _this.updateEventDonations = function (new_donation) {\n      return _objectSpread({}, _this.props.event, {\n        donations: [].concat(_toConsumableArray(_this.props.event.donations), [new_donation])\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(DonationModal, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Modal, {\n        size: \"lg\",\n        \"aria-labelledby\": \"contained-modal-title-vcenter\",\n        centered: true,\n        show: this.props.show,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        id: \"contained-modal-title-vcenter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, this.props.event.title)), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.props.event.description), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"donationAmount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Your Contribution\"), React.createElement(Form.Control, {\n        type: \"number\",\n        defaultValue: this.state.donationAmount,\n        min: \"5\",\n        max: \"200\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.props.onHide,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Sponsor Event\")));\n    }\n  }]);\n\n  return DonationModal;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state\n  };\n};\n\nvar mapDispatchToProps = {\n  addToDonations: function addToDonations(donation) {\n    return {\n      type: \"ADD_DONATIONS_TO_USER\",\n      payload: donation\n    };\n  },\n  UpdateEvents: function UpdateEvents(updated_confrim) {\n    return {\n      type: \"ADD_DONATIONS_TO_EVENT\",\n      payload: updated_confrim\n    };\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(DonationModal);","map":{"version":3,"sources":["/Users/tonylum/Desktop/hostongitpages/Helping-Hand-App/src/components/donationmodal.js"],"names":["React","Component","Modal","Button","Form","connect","Const","DonationModal","state","donationAmount","handleChange","e","setState","target","id","value","handleSubmit","props","onHide","fetch","ENDPOINT","method","headers","body","JSON","stringify","event_id","event","sponsor_id","currentUser","amount_per_volunteer","then","response","json","addToDonations","updatedEvents","updateEvents","updateEventDonations","UpdateEvents","new_event","events","map","new_donation","donations","show","title","description","mapStateToProps","mapDispatchToProps","donation","type","payload","updated_confrim"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap'\nimport { connect } from 'react-redux'\nimport * as Const from '../const.js'\n\nclass DonationModal extends Component {\n  state = {\n    donationAmount: 5\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value\n    })\n  }\n  handleSubmit = () => {\n    this.props.onHide()\n    fetch(`${Const.ENDPOINT}donations`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\" : \"application/json\",\n        \"Accept\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        event_id: this.props.event.id,\n        sponsor_id: this.props.state.currentUser.id,\n        amount_per_volunteer: this.state.donationAmount\n      })\n    })\n    .then(response => response.json())\n    .then( json => {\n      this.props.addToDonations(json)\n      const updatedEvents = this.updateEvents(this.updateEventDonations(json))\n      this.props.UpdateEvents(updatedEvents)\n    })\n\n  }\n\n  updateEvents = (new_event) => {\n    return this.props.state.events.map( event => {\n      if (new_event.id === event.id) {\n        return new_event\n      } else {\n        return event\n      }\n    })\n  }\n\n  updateEventDonations = (new_donation) => {\n    return {...this.props.event, donations: [...this.props.event.donations, new_donation]}\n  }\n\n  render() {\n\n    return (\n      <Modal\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n        show= {this.props.show}\n      >\n        <Modal.Header >\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n          {this.props.event.title}\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{this.props.event.description}</Modal.Body>\n        <Modal.Body>\n          <Form onChange={this.handleChange} >\n            <Form.Group controlId=\"donationAmount\">\n              <Form.Label>Your Contribution</Form.Label>\n              <Form.Control\n                type=\"number\"\n                defaultValue={this.state.donationAmount}\n                min = \"5\"\n                max = \"200\"\n              />\n            <Form.Text className=\"text-muted\" ></Form.Text>\n          </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.props.onHide} >Close</Button>\n          <Button onClick={this.handleSubmit} >Sponsor Event</Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n}\n\nconst mapStateToProps = (state) => {\n  return {state}\n}\n\nconst mapDispatchToProps = {\n  addToDonations: (donation) => ({\n    type: \"ADD_DONATIONS_TO_USER\",\n    payload: donation\n  }),\n  UpdateEvents: (updated_confrim) => ({\n    type: \"ADD_DONATIONS_TO_EVENT\",\n    payload: updated_confrim\n  })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DonationModal)\n"]},"metadata":{},"sourceType":"module"}